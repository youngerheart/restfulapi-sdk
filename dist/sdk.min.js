!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["restfulapi-sdk"]=e():t["restfulapi-sdk"]=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="/dist/",e(0)}([function(t,e,n){t.exports=n(6)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=(n(2),n(4)),s=n(5),u=function(t){var e={},n=function r(t,e){for(var n in t)"object"===i(t[n])?(e[n]={},r(t[n],e[n])):"string"==typeof t[n]&&(e[n]=t[n])};return n(t,e),e},c=function(){function t(e,n){r(this,t),this.http=new s(n);var i=u(e);return this.walk(i),i}return o(t,[{key:"walk",value:function(t){var e=this;for(var n in t)if("object"===i(t[n]))this.walk(t[n]);else if("string"==typeof t[n]){var r=t[n];t[n]=function(t){return e.http.getObj(t)}(r)}}}]),t}();c.all=a.all,c.httpCode=s.httpCode,t.exports=c},function(t,e,n){(function(t){"use strict";function e(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function n(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":"undefined"==typeof t?"undefined":e(t)}var r=function(t){return new Date(t).getDate()},i={init:function(t){this.limit=t.overdue?null:t.limit||3600,this.overdue=t.overdue||1,this.prefix=(t.prefix||"cache")+"_"},deal:function(t,e,n){var i=n?sessionStorage:localStorage,o=this.limit,a=this.overdue,s=this.prefix,u=i.getItem(s+t),c=Date.now();u?(u=JSON.parse(u),o?c-u.createAt>1e3*o?e(!0,u.data):e(!1,u.data):a&&(r(Date.now())-r(u.createAt)>a-1?e(!0,u.data):e(!1,u.data))):e(!0,null)},save:function(t,e,n){var r=n?sessionStorage:localStorage,i=this.prefix,o={createAt:Date.now(),data:e};r.setItem(i+t,JSON.stringify(o))},remove:function(t,e){var n=e?sessionStorage:localStorage,r=this.prefix;if(t)n.removeItem(r+t);else for(var i in n)0===i.indexOf(r)&&n.removeItem(i)}};"object"===n(t)&&(t.exports=i)}).call(e,n(3)(t))},function(t,e){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){r(this,t),this.list=[],this.status=0,this.data=null,this.progress=-1,this.finish=!1;for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;n>o;o++)i[o-1]=arguments[o];this.runFunc.apply(this,[e].concat(i))}return i(t,[{key:"defer",value:function(t){for(var e=this.list,r=(this.progress,arguments.length),i=Array(r>1?r-1:0),o=1;r>o;o++)i[o-1]=arguments[o];if(i&&(this.data=Array.isArray(i)?i:[i]),t?this.status=0:this.status=1,this.progress++,e[this.progress]){var a=e[this.progress][this.status];this.runFunc.apply(this,[a].concat(n(this.data)))}else this.finish=!0}},{key:"runFunc",value:function(t){for(var e=this,n=arguments.length,r=Array(n>1?n-1:0),i=1;n>i;i++)r[i-1]=arguments[i];t&&t.apply(void 0,r.concat([function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;n>i;i++)r[i-1]=arguments[i];e.defer.apply(e,[t].concat(r))}]))}},{key:"then",value:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];return this.list.push(n),{then:function(){return t.then.apply(t,arguments),t}}}}],[{key:"all",value:function(e){return new t(function(t){var r=function(r,s,u){s.pop(),r?i.push([u].concat(n(s))):o.push([u].concat(n(s))),a++,a===e.length&&t(!0,i,o)},i=[],o=[],a=0;e.forEach(function(t,e){t.then(function(){for(var t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];r(!0,n,e)},function(){for(var t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];r(!1,n,e)})})})}}]),t}();t.exports=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(2),a=n(4),s=function(t){try{t=JSON.parse(t)}catch(e){}return t},u=function(t){var e="";for(var n in t)e+=e?"&"+n+"="+encodeURI(t[n]):n+"="+encodeURI(t[n]);return e},c=function(t,e){var n=t.match(/:\w+/g);n&&n.forEach(function(n){var r=n.replace(":","");e[r]?(t=t.replace(new RegExp(n,"g"),e[r]),delete e[r]):t=t.replace(new RegExp(n+"/?","g"),"")});var r=u(e);return t+(r?"?"+r:"")},f=function(){function t(e){r(this,t),"undefined"==typeof e||e.cache?(this.config=e||{},this.config.urlPrefix=e.urlPrefix||"",o.init({limit:this.config.overdue||3600,overdue:this.config.overdueDay||null,prefix:this.config.cachePrefix||"api"}),this.config.isSession=e.isSession||!1,this.config.needCache=!0):(this.config={},this.config.urlPrefix=e.urlPrefix||"",this.config.needCache=!1)}return i(t,[{key:"getObj",value:function(t){var e=this;return t?{get:this.getInitMethod("get",t),post:this.getInitMethod("post",t),put:this.getInitMethod("put",t),del:this.getInitMethod("delete",t),cache:function(){for(var n=arguments.length,r=Array(n),i=0;n>i;i++)r[i]=arguments[i];return new a(e.getCacheFunc.bind(e),t,r)}}:null}},{key:"getInitMethod",value:function(t,e){var n=this;return function(){for(var r=arguments.length,i=Array(r),o=0;r>o;o++)i[o]=arguments[o];return new a(n.getSendFunc.bind(n),t,e,i)}}},{key:"getSendFunc",value:function(e,n,r,i){var a=this.config,f=a.needCache,l=a.isSession,h=a.urlPrefix,p=new XMLHttpRequest,g="";p.onreadystatechange=function(){if(4===p.readyState)if(t.codeCallback&&t.codeCallback(p.status),p.status>=200&&p.status<300){var n=s(p.responseText);f&&"get"===e&&o.save(g,n,l),i(!0,n,p.status)}else i(!1,s(p.responseText),p.status)};var d=function(){p.open(e,g,!0),"get"!==e&&p.setRequestHeader("Content-type","application/x-www-form-urlencoded")};switch(r.length){case 0:g=h+c(n,{}),d(),p.send();break;case 1:g=h+c(n,r[0]),d(),p.send();break;case 2:g=h+c(n,r[0]),d(),p.send(u(r[1]))}}},{key:"getCacheFunc",value:function(e,n,r){var i=this,a=this.config,s=a.urlPrefix,u=a.isSession,f="",l=function(){o.deal(f,function(o,a){o||!a?i.getSendFunc("get",e,n,r):setTimeout(function(){t.codeCallback&&t.codeCallback(200),r(!0,a,200)})},u)};switch(n.length){case 0:f=s+c(e,{}),l();break;case 1:case 2:f=s+c(e,n[0]),l()}}}],[{key:"httpCode",value:function(e){"function"==typeof e&&(t.codeCallback=e)}}]),t}();t.exports=f},function(t,e,n){"use strict";window.APISDK=n(1)}])});